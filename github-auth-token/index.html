<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitHub Auth Token Step-by-Step</title>
  
  <script src="../navigation.js"></script>
  <style>
    html,
    body {
      width: 100vw;
      height: 100vh;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #f7f7f7;
      color: #222;
    }

    .container {
      width: 100vw;
      height: 100vh;
      margin: 0;
      background: #fff;
      border-radius: 0;
      box-shadow: none;
      padding: 32px 24px 24px 24px;
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .step {
      display: none;
      flex-direction: column;
      align-items: center;
      min-height: 320px;
    }

    .step.active {
      display: flex;
    }

    .step img {
      max-width: 100%;
      max-height: 420px;
      margin: 24px 0 10px 0;
      border-radius: 12px;
      box-shadow: 0 0 18px #00ff41;
      background: #eee;
    }

    .step-title {
      font-size: 1.3em;
      color: #2980b9;
      margin-bottom: 10px;
      text-align: center;
    }

    .step-desc {
      font-size: 1.08em;
      color: #333;
      margin-bottom: 10px;
      text-align: center;
    }

    .token-warning {
      background: #fff200;
      color: #111;
      border: 3px solid #ff003c;
      border-radius: 10px;
      padding: 22px 18px;
      margin: 28px 0;
      font-size: 1.25em;
      font-weight: bold;
      box-shadow: 0 0 18px #ff003c;
      text-align: center;
    }

    .token-warning span {
      color: #d80000;
    }

    .nav-btns {
      display: flex;
      justify-content: space-between;
      margin-top: 24px;
    }

    .nav-btns button {
      background: #2980b9;
      color: #fff;
      border: none;
      border-radius: 5px;
      padding: 10px 22px;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.2s;
    }

    .nav-btns button:disabled {
      background: #bbb;
      color: #eee;
      cursor: not-allowed;
    }

    .nav-btns button:hover:not(:disabled) {
      background: #21618c;
    }

    .step-indicator {
      text-align: center;
      margin-top: 12px;
      color: #2980b9;
      font-size: 1em;
    }

    body {
      min-height: 100vh;
      background: #0f2027;
      /* fallback for old browsers */
      background: linear-gradient(135deg, #0f2027 0%, #2c5364 100%);
      color: #00ff41;
      font-family: 'Fira Mono', 'Consolas', 'Menlo', monospace;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    h1,
    h2,
    h3,
    p,
    th,
    td,
    label {
      color: #00ff41;
      text-shadow: 0 0 8px #00ff41, 0 0 2px #000;
    }

    table {
      background: rgba(0, 0, 0, 0.85);
      border-radius: 8px;
      box-shadow: 0 0 24px #00ff4160;
      border-collapse: collapse;
      margin-bottom: 32px;
    }

    th,
    td {
      border: 1px solid #00ff41;
      padding: 8px 16px;
      font-size: 1.1em;
    }

    input[type="text"] {
      background: #111;
      color: #00ff41;
      border: 1.5px solid #00ff41;
      border-radius: 4px;
      font-size: 1.3em;
      padding: 8px 12px;
      margin: 0 8px;
      outline: none;
      box-shadow: 0 0 8px #00ff4140;
      transition: border 0.2s, box-shadow 0.2s;
    }

    input[type="text"]:focus {
      border: 1.5px solid #fff;
      box-shadow: 0 0 16px #00ff41;
    }

    button {
      background: #00ff41;
      color: #111;
      border: none;
      border-radius: 4px;
      font-size: 1.2em;
      font-family: inherit;
      padding: 10px 28px;
      margin: 0 8px;
      cursor: pointer;
      box-shadow: 0 0 8px #00ff41;
      transition: background 0.2s, color 0.2s;
    }

    button:hover {
      background: #111;
      color: #00ff41;
      border: 1.5px solid #00ff41;
    }

    #feedback-message {
      font-size: 1.2em;
      margin-top: 18px;
      text-shadow: 0 0 8px #00ff41;
    }

    ::-webkit-scrollbar {
      width: 8px;
      background: #111;
    }

    ::-webkit-scrollbar-thumb {
      background: #00ff41;
      border-radius: 4px;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="step active">
      <div class="step-title">Step 1: Go to Your Settings</div>
      <div class="step-desc">Login to GitHub.com. Click your profile picture in the top right, then select
        <b>Settings</b>.</div>
      <img src="../images/github-settings.png" alt="GitHub Settings">
    </div>
    <div class="step">
      <div class="step-title">Step 2: Access Developer Settings</div>
      <div class="step-desc">In the left sidebar, scroll down and click <b>Developer settings</b> (at the very bottom).
      </div>
      <!-- <img src="../images/github-developer-settings.png" alt="Developer Settings"> -->
    </div>
    <div class="step">
      <div class="step-title">Step 3: Personal Access Tokens</div>
      <div class="step-desc">In Developer settings, select <b>Personal access tokens</b> - then <b>Tokens (classic)</b>.
      </div>
      <img src="../images/github-personal-access-tokens.png" alt="Personal Access Tokens">
    </div>
    <div class="step">
      <div class="step-title">Step 4: Create a New Token</div>
      <div class="step-desc">Click <b>Generate new token</b>. Choose Classic. You may be asked for your GitHub password.
      </div>
      <img src="../images/github-generate-new-token-classic.png" alt="Generate Token">
    </div>
    <div class="step">
      <div class="step-title">Step 5: Name and Permissions</div>
      <div class="step-desc">Give your token a name (e.g., <b>lmsc261</b>).<br>
        Set expiration for CUSTOM and select a date at the end of the semester.<br>
        In the SELECT SCOPES selection: select ALL the boxes for permissions if new to GitHub.<br>
        Finally, click <b>Generate Token</b>.
      </div>
    </div>
    <div class="step">
      <div class="token-warning">
        <span style="font-size:1.2em; color:#ff003c; text-shadow:0 0 6px #fff200; font-weight: bold;">⚠️
          IMPORTANT!</span><br>
        Copy the token and save it somewhere safe.<br>
        <b>You won't be able to see it again once you navigate away from this page!</b><br>
        <span>You will need this token OFTEN.</span>
      </div>
    </div>
    <div class="step">
      <div class="step-title">Step 7: Secure Your Token</div>
      <div class="step-desc">Treat your token like a password. If you think it’s compromised, revoke it from the
        Personal access tokens page.</div>
    </div>
    <div class="step">
      <div class="step-title">Done!</div>
      <div class="step-desc">You’re ready to use your GitHub token! Click below to continue.</div>
      <a href="../password-portal/index.html" id="nextPageButton">
        <button>Next Page Password: <span id="dynamic-password">loading...</span></button>
      </a>
    </div>
    <div class="nav-btns">
      <button id="prevBtn" onclick="prevStep()">Back</button>
      <button id="nextBtn" onclick="nextStep()">Next</button>
    </div>
    <div class="step-indicator" id="stepIndicator"></div>
  </div>
  <script>
    const steps = document.querySelectorAll('.step');
    let currentStep = 0;
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const stepIndicator = document.getElementById('stepIndicator');
    function showStep(idx) {
      steps.forEach((step, i) => step.classList.toggle('active', i === idx));
      prevBtn.disabled = idx === 0;
      nextBtn.disabled = idx === steps.length - 1;
      nextBtn.style.display = idx === steps.length - 1 ? 'none' : '';
      stepIndicator.textContent = `Step ${Math.min(idx + 1, steps.length - 1)} of ${steps.length - 1}`;
    }
    function nextStep() {
      if (currentStep < steps.length - 1) {
        currentStep++;
        showStep(currentStep);
      }
    }
    function prevStep() {
      if (currentStep > 0) {
        currentStep--;
        showStep(currentStep);
      }
    }
    showStep(currentStep);

    // Load dynamic password when page loads
    document.addEventListener('DOMContentLoaded', function() {
      try {
        console.log('Getting dynamic password for GithubAuthToken...');
        const levelInfo = window.getLevelInfo('GithubAuthTokenStepper.html');
        console.log('Level info:', levelInfo);
        let nextPassword = 'get-git'; // fallback

        if (levelInfo && levelInfo.next) {
          nextPassword = levelInfo.next.password;
          console.log('Next password from constants.js:', nextPassword);
        }

        document.getElementById('dynamic-password').textContent = nextPassword;
        console.log('Dynamic password set to:', nextPassword);
      } catch (error) {
        console.error('Error getting level info:', error);
        // Fallback to default
        document.getElementById('dynamic-password').textContent = 'get-git';
      }
    });
  </script>
</body>

</html>