<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homebrew - Package Manager Quest</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #eee;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Progress Bar */
        .progress-container {
            background: #0f0f23;
            border-radius: 20px;
            padding: 5px;
            margin-bottom: 20px;
            border: 2px solid #333;
        }

        .progress-bar {
            height: 20px;
            background: linear-gradient(90deg, #5cd65c, #6de06d);
            border-radius: 15px;
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px #5cd65c;
        }

        .progress-text {
            text-align: center;
            color: #888;
            font-size: 14px;
            margin-top: 5px;
            margin-bottom: 25px;
        }

        /* Section Cards */
        .section {
            display: none;
            background: #16213e;
            border: 3px solid #5cd65c;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 0 30px #5cd65c30;
            animation: slideIn 0.4s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        h1 {
            color: #5cd65c;
            font-size: 28px;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #5cd65c50;
        }

        h2 {
            color: #ffd700;
            font-size: 22px;
            margin-bottom: 15px;
        }

        p {
            font-size: 18px;
            line-height: 1.7;
            margin-bottom: 15px;
        }

        /* Code blocks */
        code, pre {
            background: #0f0f23;
            color: #5cd65c;
            padding: 4px 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
        }

        pre {
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
            border-left: 4px solid #5cd65c;
        }

        /* Quiz styling */
        .quiz-box {
            background: #0f0f23;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #4a90d9;
        }

        .quiz-box.correct {
            border-color: #5cd65c;
            box-shadow: 0 0 15px #5cd65c50;
        }

        .quiz-box.wrong {
            border-color: #ff4444;
            box-shadow: 0 0 15px #ff444450;
        }

        .quiz-question {
            color: #4a90d9;
            font-size: 18px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .quiz-option {
            display: block;
            background: #1a1a2e;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 12px 15px;
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            border-color: #4a90d9;
            background: #2a2a4e;
        }

        .quiz-option input {
            margin-right: 10px;
        }

        /* Navigation buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        .nav-btn {
            background: linear-gradient(90deg, #5cd65c, #6de06d);
            color: #111;
            border: none;
            border-radius: 8px;
            padding: 12px 30px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Courier New', monospace;
        }

        .nav-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 0 20px #5cd65c;
        }

        .nav-btn:disabled {
            background: #333;
            color: #666;
            cursor: not-allowed;
        }

        .nav-btn.back {
            background: #333;
            color: #eee;
        }

        .nav-btn.back:hover {
            background: #444;
            box-shadow: none;
        }

        /* Images */
        img {
            max-width: 100%;
            border-radius: 10px;
            margin: 15px 0;
            border: 2px solid #333;
        }

        /* Emoji icons */
        .icon {
            font-size: 40px;
            margin-bottom: 15px;
        }

        /* Response buttons */
        .response-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }

        .response-btn {
            background: #4a90d9;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 15px 40px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .response-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px #4a90d980;
        }

        .response-btn.success {
            background: #5cd65c;
            color: #111;
        }

        .response-btn.fail {
            background: #ff6b6b;
        }

        /* Link styling */
        a {
            color: #5cd65c;
        }

        /* Fun facts */
        .fun-fact {
            background: #2a2a4a;
            border-left: 4px solid #ffd700;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .fun-fact::before {
            content: "";
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="progress-text" id="progressText">Step 1</div>

        <!-- Section 0: Welcome -->
        <div class="section active" id="section-0">
            <h1>Welcome to Homebrew</h1>
            <p><strong>Homebrew</strong> is a package manager - it lets you install software with a single command.</p>
        </div>

        <!-- Section 1: Quiz -->
        <div class="section" id="section-1">
            <div class="quiz-box" id="quiz-1">
                <p class="quiz-question">What is this level about?</p>
                <label class="quiz-option"><input type="radio" name="q1" value="wrong1"> Python</label>
                <label class="quiz-option"><input type="radio" name="q1" value="correct"> Homebrew</label>
                <label class="quiz-option"><input type="radio" name="q1" value="wrong2"> Java</label>
            </div>
        </div>

        <!-- Section 2: Dependencies -->
        <div class="section" id="section-2">
            <h2>What is a Dependency?</h2>
            <p>A <strong>dependency</strong> is code that your program needs to work.</p>
            <p>Think of it like ingredients in a recipe - you can't make a cake without flour.</p>
            <p style="color: #888; font-size: 16px;">Big apps like Spotify and Discord have hundreds of dependencies.</p>
        </div>

        <!-- Section 3: Quiz -->
        <div class="section" id="section-3">
            <div class="quiz-box" id="quiz-3">
                <p class="quiz-question">Which of these is a dependency?</p>
                <label class="quiz-option"><input type="radio" name="q3" value="correct"> External code your program needs</label>
                <label class="quiz-option"><input type="radio" name="q3" value="wrong1"> Your keyboard</label>
                <label class="quiz-option"><input type="radio" name="q3" value="wrong2"> The weather</label>
            </div>
        </div>

        <!-- Section 4: Homebrew helps -->
        <div class="section" id="section-6">
            <h2>How Homebrew Helps</h2>
            <p>Homebrew automatically installs software AND all its dependencies.</p>
            <p>One command. Everything you need. Done.</p>
            <p>But first, we need to install Homebrew itself.</p>
        </div>

        <!-- Section 7: Quiz -->
        <div class="section" id="section-7">
            <div class="quiz-box" id="quiz-7">
                <p class="quiz-question">What does Homebrew do?</p>
                <label class="quiz-option"><input type="radio" name="q7" value="correct"> Installs software and its dependencies</label>
                <label class="quiz-option"><input type="radio" name="q7" value="wrong1"> Makes coffee</label>
                <label class="quiz-option"><input type="radio" name="q7" value="wrong2"> Changes your wallpaper</label>
            </div>
        </div>

        <!-- Section 8: Install Homebrew -->
        <div class="section" id="section-8">
            <h1>Installing Homebrew</h1>
            <p>Go to <a href="https://brew.sh" target="_blank">brew.sh</a> and copy the install command.</p>
            <img src="../images/homebrew.png" alt="Homebrew website">
            <p>Look for the line that starts with <code>/bin/bash</code> and copy it.</p>
        </div>

        <!-- Section 9: Run it -->
        <div class="section" id="section-10">
            <h2>Paste and Run</h2>
            <p>Open <strong>Terminal</strong> and paste that command. Hit Enter.</p>
            <p style="color: #888; font-size: 16px;">It might ask for your password. When you type, nothing appears - that's normal. Just type your password and hit Enter.</p>
            <p>This can take a few minutes.</p>
        </div>

        <!-- Section 11: Quiz -->
        <div class="section" id="section-11">
            <div class="quiz-box" id="quiz-11">
                <p class="quiz-question">What happens when you type your password?</p>
                <label class="quiz-option"><input type="radio" name="q11" value="wrong1"> It shows stars ****</label>
                <label class="quiz-option"><input type="radio" name="q11" value="wrong2"> It prints your password</label>
                <label class="quiz-option"><input type="radio" name="q11" value="correct"> Nothing appears, but it works</label>
            </div>
        </div>

        <!-- Section 12: Next Steps check -->
        <div class="section" id="section-12">
            <h2>Did you see this message?</h2>
            <img src="../images/brew-error-cropped.png" alt="Next steps message" style="max-width: 100%; border-radius: 8px; margin: 15px 0;">
            <p>If you see "Next steps" like this, you need to run those commands in your terminal.</p>
            <p>In YOUR terminal, copy everything from the <code>echo</code> to the last quotation mark, then paste it and press Enter.</p>
            <p style="background: #ff4444; color: white; padding: 12px 15px; border-radius: 8px; font-weight: bold; text-align: center; margin: 15px 0;">⚠️ Don't copy from the picture - copy from YOUR OWN terminal ⚠️</p>
        </div>

        <!-- Section 13: Verify -->
        <div class="section" id="section-13">
            <h2>Verify It Worked</h2>
            <p>Type this command to check if Homebrew installed:</p>
            <pre><code>brew -v</code></pre>
            <p>You should see a version number like <code>Homebrew 4.x.x</code></p>
        </div>

        <!-- Section 13: Final check -->
        <div class="section" id="section-13">
            <h2>What did you see?</h2>
            <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                <div style="text-align: center;">
                    <img src="../images/brew-version-good.png" alt="Success" style="max-width: 250px;">
                    <p style="color: #5cd65c;">✓ Success!</p>
                </div>
                <div style="text-align: center;">
                    <img src="../images/brew-version-bad.png" alt="Error" style="max-width: 250px;">
                    <p style="color: #ff6b6b;">✗ Error</p>
                </div>
            </div>
            <div class="response-buttons">
                <button class="response-btn success" onclick="handleSuccess()">I see a version number</button>
                <button class="response-btn fail" onclick="handleFail()">I got an error</button>
            </div>
            <p id="result-message" style="text-align: center; font-size: 20px; margin-top: 20px;"></p>
        </div>

        <!-- Section 14: Now learn to use it -->
        <div class="section" id="section-14">
            <h2>Using Homebrew</h2>
            <p>Now that Homebrew is installed, here's how to use it.</p>
            <p>Installing software is simple:</p>
            <pre><code>brew install &lt;software_name&gt;</code></pre>
            <p>For example, to install Python:</p>
            <pre><code>brew install python</code></pre>
            <p>Homebrew will download Python AND everything Python needs to work.</p>
        </div>

        <!-- Section 15: Quiz -->
        <div class="section" id="section-15">
            <div class="quiz-box" id="quiz-15">
                <p class="quiz-question">What's the correct command to install Python?</p>
                <label class="quiz-option"><input type="radio" name="q15" value="wrong1"> python install brew</label>
                <label class="quiz-option"><input type="radio" name="q15" value="correct"> brew install python</label>
                <label class="quiz-option"><input type="radio" name="q15" value="wrong2"> install python brew</label>
            </div>
        </div>

        <!-- Section 16: Install Python -->
        <div class="section" id="section-16">
            <h2>Install Python</h2>
            <p>Now run this command in your terminal to install Python:</p>
            <pre><code>brew install python</code></pre>
            <p>This may take a minute. When it's done, verify it worked by typing:</p>
            <pre><code>python3 --version</code></pre>
            <p>You should see something like <code>Python 3.12.0</code> (the numbers may be different).</p>
            <div class="response-buttons" style="margin-top: 20px;">
                <button class="response-btn success" onclick="handlePythonSuccess()">I see a version number</button>
                <button class="response-btn fail" onclick="handlePythonFail()">I got an error</button>
            </div>
            <p id="python-result" style="text-align: center; font-size: 18px; margin-top: 15px;"></p>
        </div>

        <!-- Section 17: Version Flag Quiz -->
        <div class="section" id="section-17">
            <div class="quiz-box" id="quiz-17">
                <p class="quiz-question">What does the <code>--version</code> flag do?</p>
                <label class="quiz-option"><input type="radio" name="q17" value="correct"> Shows what version of the software is installed</label>
                <label class="quiz-option"><input type="radio" name="q17" value="wrong1"> Installs the latest version</label>
                <label class="quiz-option"><input type="radio" name="q17" value="wrong2"> Deletes old versions</label>
            </div>
        </div>

        <!-- Section 18: Done -->
        <div class="section" id="section-18">
            <h2>You're Ready</h2>
            <p>You now have Homebrew and Python.</p>
            <p id="password-display" style="margin-top: 20px; padding: 15px; background: #0f0f23; border-radius: 8px; text-align: center;">
                Password to the next level: <strong id="next-password" style="color: #5cd65c;">loading...</strong>
            </p>
            <button class="nav-btn" onclick="goToPortal()" style="margin-top: 20px; display: block; margin-left: auto; margin-right: auto;">Continue →</button>
        </div>

        <!-- Navigation -->
        <div class="nav-buttons">
            <button class="nav-btn back" id="prevBtn" disabled onclick="prevSection()">← Back</button>
            <button class="nav-btn" id="nextBtn" disabled onclick="nextSection()">Next →</button>
        </div>
    </div>

    <script src="../navigation.js"></script>
    <script>
        const sections = document.querySelectorAll('.section');
        const totalSections = sections.length;
        let currentSection = 0;
        let quizAnswered = Array(totalSections).fill(false);

        // Mark non-quiz sections as already answered (except those with response-buttons)
        sections.forEach((sec, i) => {
            if (!sec.querySelector('.quiz-box') && !sec.querySelector('.response-buttons')) {
                quizAnswered[i] = true;
            }
        });

        function updateProgress() {
            const progress = ((currentSection + 1) / totalSections) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Step ${currentSection + 1} of ${totalSections}`;
        }

        function showSection(idx) {
            sections.forEach((sec, i) => sec.classList.toggle('active', i === idx));
            document.getElementById('prevBtn').disabled = idx === 0;
            document.getElementById('nextBtn').disabled = !quizAnswered[idx] || idx === totalSections - 1;
            updateProgress();
        }

        function nextSection() {
            if (currentSection < totalSections - 1 && quizAnswered[currentSection]) {
                currentSection++;
                showSection(currentSection);
            }
        }

        function prevSection() {
            if (currentSection > 0) {
                currentSection--;
                showSection(currentSection);
            }
        }

        // Quiz handling
        document.querySelectorAll('.quiz-box').forEach((quiz, idx) => {
            const sectionIdx = Array.from(sections).findIndex(sec => sec.contains(quiz));
            
            quiz.querySelectorAll('input[type="radio"]').forEach(input => {
                input.addEventListener('change', () => {
                    if (input.value === 'correct') {
                        quiz.classList.remove('wrong');
                        quiz.classList.add('correct');
                        quizAnswered[sectionIdx] = true;
                        if (sectionIdx === currentSection) {
                            document.getElementById('nextBtn').disabled = false;
                        }
                    } else {
                        quiz.classList.remove('correct');
                        quiz.classList.add('wrong');
                        quizAnswered[sectionIdx] = false;
                        document.getElementById('nextBtn').disabled = true;
                    }
                });
            });
        });

        function handleSuccess() {
            document.getElementById('result-message').innerHTML = '<span style="color: #5cd65c;">Homebrew is installed.</span>';
            // Mark current section as complete and enable next button
            quizAnswered[currentSection] = true;
            document.getElementById('nextBtn').disabled = false;
        }

        function handleFail() {
            document.getElementById('result-message').innerHTML = '<span style="color: #ffd700;">Raise your hand for help.</span>';
        }

        function handlePythonSuccess() {
            document.getElementById('python-result').innerHTML = '<span style="color: #5cd65c;">Python is installed.</span>';
            quizAnswered[currentSection] = true;
            document.getElementById('nextBtn').disabled = false;
        }

        function handlePythonFail() {
            document.getElementById('python-result').innerHTML = '<span style="color: #ffd700;">Try running the command again, or raise your hand for help.</span>';
        }

        function goToPortal() {
            window.location.href = '../password-portal/index.html';
        }

        // Set the password on load
        window.addEventListener('load', function() {
            let password = 'bool';
            if (typeof getLevelInfo === 'function') {
                const info = getLevelInfo('homebrew');
                if (info && info.next) {
                    password = info.next.password;
                }
            }
            document.getElementById('next-password').textContent = password;
        });

        // Initialize
        showSection(0);
    </script>
</body>
</html>
